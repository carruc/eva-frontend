{"ast":null,"code":"var _jsxFileName = \"/home/carruc/repos/eva-frontend/client/src/components/ProjectModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { X, Calendar, Clock } from 'lucide-react';\nimport { HexColorPicker } from 'react-colorful';\nimport './ProjectModal.css';\n\n// Implements requirement D5: Project creation modal with deadline support\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProjectModal = ({\n  project,\n  existingDeadline,\n  onSave,\n  onClose\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    name: '',\n    color: '#3b82f6',\n    deadline: '',\n    deadlineTime: '23:59' // Default to end of day\n  });\n  const [errors, setErrors] = useState({});\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const [dateInput, setDateInput] = useState(''); // For dd/mm/yy format\n\n  // Predefined color palette\n  const colorPalette = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16', '#f97316', '#6366f1', '#14b8a6', '#f43f5e', '#8b5a2b', '#64748b', '#dc2626'];\n\n  // Initialize form data when editing\n  useEffect(() => {\n    if (project) {\n      setFormData(prev => ({\n        ...prev,\n        name: project.name,\n        color: project.color\n      }));\n\n      // If there's an existing deadline, populate the deadline fields\n      if (existingDeadline) {\n        const deadlineDate = new Date(existingDeadline.date);\n        const dateValue = deadlineDate.toISOString().split('T')[0];\n        setFormData(prev => ({\n          ...prev,\n          deadline: dateValue,\n          deadlineTime: deadlineDate.toTimeString().slice(0, 5)\n        }));\n        setDateInput(formatDateToShort(dateValue));\n      }\n    }\n  }, [project, existingDeadline]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Clear errors when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: null\n      }));\n    }\n  };\n  const handleColorChange = color => {\n    setFormData(prev => ({\n      ...prev,\n      color: color\n    }));\n  };\n\n  // Helper function to format date from YYYY-MM-DD to dd/mm/yy\n  const formatDateToShort = dateString => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const year = date.getFullYear().toString().slice(-2); // Last 2 digits\n    return `${day}/${month}/${year}`;\n  };\n\n  // Helper function to parse dd/mm/yy format\n  const parseDateInput = dateStr => {\n    const parts = dateStr.split(/[/.-]/);\n    if (parts.length === 3) {\n      const day = parseInt(parts[0], 10);\n      const month = parseInt(parts[1], 10);\n      let year = parseInt(parts[2], 10);\n\n      // Convert 2-digit year to 4-digit year\n      if (year >= 0 && year <= 30) {\n        year += 2000; // 00-30 -> 2000-2030\n      } else if (year >= 31 && year <= 99) {\n        year += 1900; // 31-99 -> 1931-1999\n      } else if (year >= 1900) {\n        // Already 4-digit year, keep as is\n      } else {\n        return null; // Invalid year\n      }\n      if (day >= 1 && day <= 31 && month >= 1 && month <= 12) {\n        // Convert to YYYY-MM-DD format for internal use\n        return `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;\n      }\n    }\n    return null;\n  };\n\n  // Handle date input change\n  const handleDateInputChange = e => {\n    let value = e.target.value;\n\n    // Remove all non-numeric characters except slashes\n    value = value.replace(/[^\\d/]/g, '');\n\n    // Auto-format with slashes as user types\n    if (value.length >= 2 && value.charAt(2) !== '/') {\n      value = value.substring(0, 2) + '/' + value.substring(2);\n    }\n    if (value.length >= 5 && value.charAt(5) !== '/') {\n      value = value.substring(0, 5) + '/' + value.substring(5);\n    }\n\n    // Limit to 8 characters (dd/mm/yy)\n    if (value.length > 8) {\n      value = value.substring(0, 8);\n    }\n    setDateInput(value);\n\n    // Only try to parse if we have a complete date (8 characters: dd/mm/yy)\n    if (value.length === 8) {\n      const parsedDate = parseDateInput(value);\n      if (parsedDate) {\n        // Additional validation for deadlines - must be today or future\n        const selectedDate = new Date(parsedDate);\n        const today = new Date();\n        today.setHours(0, 0, 0, 0); // Start of today\n\n        if (selectedDate >= today) {\n          setFormData(prev => ({\n            ...prev,\n            deadline: parsedDate\n          }));\n          if (errors.deadline) {\n            setErrors(prev => ({\n              ...prev,\n              deadline: null\n            }));\n          }\n        } else {\n          // Clear the internal date if deadline is in the past\n          setFormData(prev => ({\n            ...prev,\n            deadline: ''\n          }));\n        }\n      } else {\n        // Clear the internal date if input is invalid\n        setFormData(prev => ({\n          ...prev,\n          deadline: ''\n        }));\n      }\n    } else {\n      // Clear the internal date if input is incomplete\n      setFormData(prev => ({\n        ...prev,\n        deadline: ''\n      }));\n    }\n  };\n\n  // Handle date key press for better UX\n  const handleDateKeyPress = e => {\n    // Allow backspace, delete, tab, escape, enter\n    if ([8, 9, 27, 13, 46].indexOf(e.keyCode) !== -1 ||\n    // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X\n    e.keyCode === 65 && e.ctrlKey === true || e.keyCode === 67 && e.ctrlKey === true || e.keyCode === 86 && e.ctrlKey === true || e.keyCode === 88 && e.ctrlKey === true) {\n      return;\n    }\n    // Ensure that it is a number or slash and stop the keypress\n    if ((e.shiftKey || e.keyCode < 48 || e.keyCode > 57) && (e.keyCode < 96 || e.keyCode > 105) && e.keyCode !== 191 && e.keyCode !== 111) {\n      e.preventDefault();\n    }\n  };\n\n  // Format date for display\n  const formatDateLong = dateString => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.name.trim()) {\n      newErrors.name = 'Project name is required';\n    } else if (formData.name.trim().length < 2) {\n      newErrors.name = 'Project name must be at least 2 characters';\n    } else if (formData.name.trim().length > 50) {\n      newErrors.name = 'Project name must be less than 50 characters';\n    }\n    if (!formData.color) {\n      newErrors.color = 'Project color is required';\n    }\n\n    // Validate deadline only if user has started entering deadline information\n    const hasDeadlineInput = dateInput.trim() || formData.deadline || formData.deadlineTime !== '23:59';\n    if (hasDeadlineInput) {\n      if (!formData.deadline) {\n        if (dateInput.trim()) {\n          newErrors.deadline = 'Please enter a valid date in dd/mm/yy format (e.g., 25/12/24)';\n        } else {\n          newErrors.deadline = 'Please complete the deadline date';\n        }\n      } else {\n        const selectedDate = new Date(formData.deadline + 'T' + formData.deadlineTime);\n        const now = new Date();\n        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()); // Start of today\n        const selectedDateOnly = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());\n\n        // Check if date is in the past\n        if (selectedDate < now) {\n          newErrors.deadline = 'Deadline cannot be in the past';\n        }\n\n        // Additional validation for deadlines - must be today or after today\n        if (selectedDateOnly < today) {\n          newErrors.deadline = 'Deadlines must be set for today or a future date';\n        }\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (validateForm()) {\n      const projectData = {\n        name: formData.name.trim(),\n        color: formData.color\n      };\n\n      // Include deadline data if both date and time are provided\n      if (formData.deadline && formData.deadlineTime) {\n        const deadlineDateTime = new Date(formData.deadline + 'T' + formData.deadlineTime);\n        projectData.deadline = {\n          date: deadlineDateTime.toISOString(),\n          name: `${formData.name.trim()} Deadline`\n        };\n      }\n      onSave(projectData);\n    }\n  };\n  const handleOverlayClick = e => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    onClick: handleOverlayClick,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content project-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: project ? 'Edit Project' : 'Create New Project'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-ghost btn-sm\",\n          onClick: onClose,\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"projectName\",\n              className: \"form-label\",\n              children: \"Project Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"projectName\",\n              name: \"name\",\n              type: \"text\",\n              className: `input ${errors.name ? 'input-error' : ''}`,\n              value: formData.name,\n              onChange: handleInputChange,\n              placeholder: \"Enter project name...\",\n              autoFocus: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this), errors.name && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-error\",\n              children: errors.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Project Color *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"color-palette\",\n              children: [colorPalette.map(color => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: `color-swatch ${formData.color === color ? 'selected' : ''}`,\n                style: {\n                  backgroundColor: color\n                },\n                onClick: () => handleColorChange(color),\n                title: `Select ${color}`\n              }, color, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: `color-swatch custom-color ${showColorPicker ? 'selected' : ''}`,\n                onClick: () => setShowColorPicker(!showColorPicker),\n                title: \"Custom color\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), showColorPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"color-picker-container\",\n              children: [/*#__PURE__*/_jsxDEV(HexColorPicker, {\n                color: formData.color,\n                onChange: handleColorChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"color-picker-info\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"input color-input\",\n                  value: formData.color,\n                  onChange: e => handleColorChange(e.target.value),\n                  placeholder: \"#000000\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"color-preview\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"color-preview-label\",\n                children: \"Selected color:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"color-preview-swatch\",\n                style: {\n                  backgroundColor: formData.color\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"color-preview-value\",\n                children: formData.color\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this), errors.color && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-error\",\n              children: errors.color\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Project Deadline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"deadline-inputs\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"datetime-inputs\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"date-input-group\",\n                  children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                    size: 16,\n                    className: \"input-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    name: \"deadline\",\n                    type: \"text\",\n                    className: `input ${errors.deadline ? 'input-error' : ''}`,\n                    value: dateInput,\n                    onChange: handleDateInputChange,\n                    onKeyDown: handleDateKeyPress,\n                    placeholder: \"dd/mm/yy\",\n                    title: \"Enter date in dd/mm/yy format (e.g., 25/12/24)\",\n                    maxLength: 8\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 21\n                  }, this), formData.deadline && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"date-display\",\n                    children: [\"\\u2713 \", formatDateLong(formData.deadline)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 380,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"time-input-group\",\n                  children: [/*#__PURE__*/_jsxDEV(Clock, {\n                    size: 16,\n                    className: \"input-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 387,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    name: \"deadlineTime\",\n                    type: \"time\",\n                    className: `input ${errors.deadlineTime ? 'input-error' : ''}`,\n                    value: formData.deadlineTime,\n                    onChange: handleInputChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this), errors.deadline && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-error\",\n                children: errors.deadline\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            onClick: onClose,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: project ? 'Update Project' : 'Create Project'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 5\n  }, this);\n};\n_s(ProjectModal, \"Jk48mP7GXKD9s4GlUU5MmE65oxw=\");\n_c = ProjectModal;\nexport default ProjectModal;\nvar _c;\n$RefreshReg$(_c, \"ProjectModal\");","map":{"version":3,"names":["React","useState","useEffect","X","Calendar","Clock","HexColorPicker","jsxDEV","_jsxDEV","ProjectModal","project","existingDeadline","onSave","onClose","_s","formData","setFormData","name","color","deadline","deadlineTime","errors","setErrors","showColorPicker","setShowColorPicker","dateInput","setDateInput","colorPalette","prev","deadlineDate","Date","date","dateValue","toISOString","split","toTimeString","slice","formatDateToShort","handleInputChange","e","value","target","handleColorChange","dateString","day","getDate","toString","padStart","month","getMonth","year","getFullYear","parseDateInput","dateStr","parts","length","parseInt","handleDateInputChange","replace","charAt","substring","parsedDate","selectedDate","today","setHours","handleDateKeyPress","indexOf","keyCode","ctrlKey","shiftKey","preventDefault","formatDateLong","toLocaleDateString","weekday","validateForm","newErrors","trim","hasDeadlineInput","now","selectedDateOnly","Object","keys","handleSubmit","projectData","deadlineDateTime","handleOverlayClick","currentTarget","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","size","onSubmit","htmlFor","id","type","onChange","placeholder","autoFocus","map","style","backgroundColor","title","onKeyDown","maxLength","_c","$RefreshReg$"],"sources":["/home/carruc/repos/eva-frontend/client/src/components/ProjectModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { X, Calendar, Clock } from 'lucide-react';\nimport { HexColorPicker } from 'react-colorful';\nimport './ProjectModal.css';\n\n// Implements requirement D5: Project creation modal with deadline support\nconst ProjectModal = ({ project, existingDeadline, onSave, onClose }) => {\n  const [formData, setFormData] = useState({\n    name: '',\n    color: '#3b82f6',\n    deadline: '',\n    deadlineTime: '23:59' // Default to end of day\n  });\n  const [errors, setErrors] = useState({});\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const [dateInput, setDateInput] = useState(''); // For dd/mm/yy format\n\n  // Predefined color palette\n  const colorPalette = [\n    '#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6',\n    '#ec4899', '#06b6d4', '#84cc16', '#f97316', '#6366f1',\n    '#14b8a6', '#f43f5e', '#8b5a2b', '#64748b', '#dc2626'\n  ];\n\n  // Initialize form data when editing\n  useEffect(() => {\n    if (project) {\n      setFormData(prev => ({\n        ...prev,\n        name: project.name,\n        color: project.color\n      }));\n\n      // If there's an existing deadline, populate the deadline fields\n      if (existingDeadline) {\n        const deadlineDate = new Date(existingDeadline.date);\n        const dateValue = deadlineDate.toISOString().split('T')[0];\n        setFormData(prev => ({\n          ...prev,\n          deadline: dateValue,\n          deadlineTime: deadlineDate.toTimeString().slice(0, 5)\n        }));\n        setDateInput(formatDateToShort(dateValue));\n      }\n    }\n  }, [project, existingDeadline]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear errors when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: null\n      }));\n    }\n  };\n\n  const handleColorChange = (color) => {\n    setFormData(prev => ({\n      ...prev,\n      color: color\n    }));\n  };\n\n  // Helper function to format date from YYYY-MM-DD to dd/mm/yy\n  const formatDateToShort = (dateString) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const year = date.getFullYear().toString().slice(-2); // Last 2 digits\n    return `${day}/${month}/${year}`;\n  };\n\n  // Helper function to parse dd/mm/yy format\n  const parseDateInput = (dateStr) => {\n    const parts = dateStr.split(/[/.-]/);\n    if (parts.length === 3) {\n      const day = parseInt(parts[0], 10);\n      const month = parseInt(parts[1], 10);\n      let year = parseInt(parts[2], 10);\n      \n      // Convert 2-digit year to 4-digit year\n      if (year >= 0 && year <= 30) {\n        year += 2000; // 00-30 -> 2000-2030\n      } else if (year >= 31 && year <= 99) {\n        year += 1900; // 31-99 -> 1931-1999\n      } else if (year >= 1900) {\n        // Already 4-digit year, keep as is\n      } else {\n        return null; // Invalid year\n      }\n      \n      if (day >= 1 && day <= 31 && month >= 1 && month <= 12) {\n        // Convert to YYYY-MM-DD format for internal use\n        return `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;\n      }\n    }\n    return null;\n  };\n\n  // Handle date input change\n  const handleDateInputChange = (e) => {\n    let value = e.target.value;\n    \n    // Remove all non-numeric characters except slashes\n    value = value.replace(/[^\\d/]/g, '');\n    \n    // Auto-format with slashes as user types\n    if (value.length >= 2 && value.charAt(2) !== '/') {\n      value = value.substring(0, 2) + '/' + value.substring(2);\n    }\n    if (value.length >= 5 && value.charAt(5) !== '/') {\n      value = value.substring(0, 5) + '/' + value.substring(5);\n    }\n    \n    // Limit to 8 characters (dd/mm/yy)\n    if (value.length > 8) {\n      value = value.substring(0, 8);\n    }\n    \n    setDateInput(value);\n    \n    // Only try to parse if we have a complete date (8 characters: dd/mm/yy)\n    if (value.length === 8) {\n      const parsedDate = parseDateInput(value);\n      if (parsedDate) {\n        // Additional validation for deadlines - must be today or future\n        const selectedDate = new Date(parsedDate);\n        const today = new Date();\n        today.setHours(0, 0, 0, 0); // Start of today\n        \n        if (selectedDate >= today) {\n          setFormData(prev => ({ ...prev, deadline: parsedDate }));\n          if (errors.deadline) {\n            setErrors(prev => ({ ...prev, deadline: null }));\n          }\n        } else {\n          // Clear the internal date if deadline is in the past\n          setFormData(prev => ({ ...prev, deadline: '' }));\n        }\n      } else {\n        // Clear the internal date if input is invalid\n        setFormData(prev => ({ ...prev, deadline: '' }));\n      }\n    } else {\n      // Clear the internal date if input is incomplete\n      setFormData(prev => ({ ...prev, deadline: '' }));\n    }\n  };\n\n  // Handle date key press for better UX\n  const handleDateKeyPress = (e) => {\n    // Allow backspace, delete, tab, escape, enter\n    if ([8, 9, 27, 13, 46].indexOf(e.keyCode) !== -1 ||\n        // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X\n        (e.keyCode === 65 && e.ctrlKey === true) ||\n        (e.keyCode === 67 && e.ctrlKey === true) ||\n        (e.keyCode === 86 && e.ctrlKey === true) ||\n        (e.keyCode === 88 && e.ctrlKey === true)) {\n      return;\n    }\n    // Ensure that it is a number or slash and stop the keypress\n    if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && \n        (e.keyCode < 96 || e.keyCode > 105) && \n        e.keyCode !== 191 && e.keyCode !== 111) {\n      e.preventDefault();\n    }\n  };\n\n  // Format date for display\n  const formatDateLong = (dateString) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.name.trim()) {\n      newErrors.name = 'Project name is required';\n    } else if (formData.name.trim().length < 2) {\n      newErrors.name = 'Project name must be at least 2 characters';\n    } else if (formData.name.trim().length > 50) {\n      newErrors.name = 'Project name must be less than 50 characters';\n    }\n\n    if (!formData.color) {\n      newErrors.color = 'Project color is required';\n    }\n\n    // Validate deadline only if user has started entering deadline information\n    const hasDeadlineInput = dateInput.trim() || formData.deadline || formData.deadlineTime !== '23:59';\n    \n    if (hasDeadlineInput) {\n      if (!formData.deadline) {\n        if (dateInput.trim()) {\n          newErrors.deadline = 'Please enter a valid date in dd/mm/yy format (e.g., 25/12/24)';\n        } else {\n          newErrors.deadline = 'Please complete the deadline date';\n        }\n      } else {\n        const selectedDate = new Date(formData.deadline + 'T' + formData.deadlineTime);\n        const now = new Date();\n        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()); // Start of today\n        const selectedDateOnly = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());\n        \n        // Check if date is in the past\n        if (selectedDate < now) {\n          newErrors.deadline = 'Deadline cannot be in the past';\n        }\n        \n        // Additional validation for deadlines - must be today or after today\n        if (selectedDateOnly < today) {\n          newErrors.deadline = 'Deadlines must be set for today or a future date';\n        }\n      }\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    if (validateForm()) {\n      const projectData = {\n        name: formData.name.trim(),\n        color: formData.color\n      };\n\n      // Include deadline data if both date and time are provided\n      if (formData.deadline && formData.deadlineTime) {\n        const deadlineDateTime = new Date(formData.deadline + 'T' + formData.deadlineTime);\n        projectData.deadline = {\n          date: deadlineDateTime.toISOString(),\n          name: `${formData.name.trim()} Deadline`\n        };\n      }\n\n      onSave(projectData);\n    }\n  };\n\n  const handleOverlayClick = (e) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\" onClick={handleOverlayClick}>\n      <div className=\"modal-content project-modal\">\n        <div className=\"modal-header\">\n          <h3>{project ? 'Edit Project' : 'Create New Project'}</h3>\n          <button className=\"btn btn-ghost btn-sm\" onClick={onClose}>\n            <X size={16} />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"modal-body\">\n            {/* Project name input */}\n            <div className=\"form-group\">\n              <label htmlFor=\"projectName\" className=\"form-label\">\n                Project Name *\n              </label>\n              <input\n                id=\"projectName\"\n                name=\"name\"\n                type=\"text\"\n                className={`input ${errors.name ? 'input-error' : ''}`}\n                value={formData.name}\n                onChange={handleInputChange}\n                placeholder=\"Enter project name...\"\n                autoFocus\n              />\n              {errors.name && (\n                <div className=\"form-error\">{errors.name}</div>\n              )}\n            </div>\n\n            {/* Color selection */}\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                Project Color *\n              </label>\n              \n              {/* Color palette */}\n              <div className=\"color-palette\">\n                {colorPalette.map((color) => (\n                  <button\n                    key={color}\n                    type=\"button\"\n                    className={`color-swatch ${formData.color === color ? 'selected' : ''}`}\n                    style={{ backgroundColor: color }}\n                    onClick={() => handleColorChange(color)}\n                    title={`Select ${color}`}\n                  />\n                ))}\n                <button\n                  type=\"button\"\n                  className={`color-swatch custom-color ${showColorPicker ? 'selected' : ''}`}\n                  onClick={() => setShowColorPicker(!showColorPicker)}\n                  title=\"Custom color\"\n                >\n                  <span>+</span>\n                </button>\n              </div>\n\n              {/* Custom color picker */}\n              {showColorPicker && (\n                <div className=\"color-picker-container\">\n                  <HexColorPicker \n                    color={formData.color} \n                    onChange={handleColorChange}\n                  />\n                  <div className=\"color-picker-info\">\n                    <input\n                      type=\"text\"\n                      className=\"input color-input\"\n                      value={formData.color}\n                      onChange={(e) => handleColorChange(e.target.value)}\n                      placeholder=\"#000000\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* Color preview */}\n              <div className=\"color-preview\">\n                <span className=\"color-preview-label\">Selected color:</span>\n                <div \n                  className=\"color-preview-swatch\"\n                  style={{ backgroundColor: formData.color }}\n                />\n                <span className=\"color-preview-value\">{formData.color}</span>\n              </div>\n\n              {errors.color && (\n                <div className=\"form-error\">{errors.color}</div>\n              )}\n            </div>\n\n            {/* Deadline section */}\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                Project Deadline\n              </label>\n              \n              <div className=\"deadline-inputs\">\n                <div className=\"datetime-inputs\">\n                  <div className=\"date-input-group\">\n                    <Calendar size={16} className=\"input-icon\" />\n                    <input\n                      name=\"deadline\"\n                      type=\"text\"\n                      className={`input ${errors.deadline ? 'input-error' : ''}`}\n                      value={dateInput}\n                      onChange={handleDateInputChange}\n                      onKeyDown={handleDateKeyPress}\n                      placeholder=\"dd/mm/yy\"\n                      title=\"Enter date in dd/mm/yy format (e.g., 25/12/24)\"\n                      maxLength={8}\n                    />\n                    {formData.deadline && (\n                      <span className=\"date-display\">\n                        ✓ {formatDateLong(formData.deadline)}\n                      </span>\n                    )}\n                  </div>\n                  \n                  <div className=\"time-input-group\">\n                    <Clock size={16} className=\"input-icon\" />\n                    <input\n                      name=\"deadlineTime\"\n                      type=\"time\"\n                      className={`input ${errors.deadlineTime ? 'input-error' : ''}`}\n                      value={formData.deadlineTime}\n                      onChange={handleInputChange}\n                    />\n                  </div>\n                </div>\n                {errors.deadline && (\n                  <div className=\"form-error\">\n                    {errors.deadline}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"modal-footer\">\n            <button type=\"button\" className=\"btn btn-secondary\" onClick={onClose}>\n              Cancel\n            </button>\n            <button type=\"submit\" className=\"btn btn-primary\">\n              {project ? 'Update Project' : 'Create Project'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ProjectModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}